<div ng-controller="PlanejamentoMateriasController" ng-init="initPlanejamentoMaterias();">
    <div class="pe-navbar">
        <nav header></nav>
    </div>
    <div>
        <div class="row lista-home">
            <div class="col-md-10 col-md-offset-1">
                <form class="form" novalidate name="formulario">
                    <uib-tabset active="active">
                        <uib-tab index="0" heading="Dados Gerais">
                            <br />
                            <div class="form-group">
                                <label for="nome" class="control-label">Para qual prova você irá esstudar?</label>
                                <input id="nome" name="nome" class="form-control" type="text" ng-model="planejamento.nome"
                                       placeholder="exemplo: TRT, TCU, TCE" required>
                                <div ng-messages="formulario.nome.$error">
                                    <div ng-message="required">Obrigatório.</div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="data" class="control-label">Data da Prova</label>
                                <input id="data" name="data" class="form-control" min="{{minMax.min}}" type="date" ng-model="planejamento.prova.$date" required>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="date-unknow" ng-model="planejamento.naoSabeFim" ng-change="modificaNaoSei()">
                                <label for="date-unknow" class="">
                                    Ainda não sei a data da prova.
                                </label>
                            </div>
                            <div class="form-group">
                                faltam {{planejamento.prova.$date | amDifference : null : 'days'}} dias para a prova.
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary" ng-disabled="formulario.$invalid" ng-click="irMaterias();">
                                    Matérias&nbsp;<i class="glyphicon glyphicon-arrow-right"></i>
                                </button>
                            </div>
                        </uib-tab>
                        <uib-tab index="1" heading="Matérias" disable="formulario.$invalid" select="tabMateriaSelecionada()">
                            <h4>{{planejamento.nome}} - {{planejamento.cargaHorariaTotal}}h</h4>
                            <hr/>
                            <table class="table table-striped table-responsive">
                                <thead>
                                    <tr>
                                        <th>Matéria</th>
                                        <th>Carga Horaria</th>
                                        <!--th rowspan="2">Peso</th-->
                                        <!--th>Nivel de Conhecimento</th-->
                                    </tr>
                                    <!--tr>
                                        <th class="noPadding">
                                            <small class="pull-left">baixo</small>
                                            <small class="pull-right">alto</small>
                                        </th>
                                    </tr-->
                                </thead>
                                <tbody>
                                    <tr ng-repeat="materia in planejamento.materias" ng-class="{'text-muted' : !materia.selecionada}">
                                        <td><input type="checkbox" id="{{materia.id}}" ng-model="materia.selecionada" ng-change="calcularCargaHoraria();"><label for="{{materia.id}}">{{materia.assunto}}</label></td>
                                        <td>
                                            <input type="number" min="0" max="500" ng-model="materia.cargaHorariaHoras" ng-change="calcularCargaHoraria();">
                                        </td>
                                        <!--td>
                                            <select ng-disabled="!materia.selecionada" class="form-control" ng-model="materia.peso" ng-options="peso for peso in pesos"></select>
                                        </td>
                                        <td>
                                            <span ng-disabled="!materia.selecionada" slider id="conhecimentoSlider"  ng-model="materia.conhecimento" min="0" step="25" max="100" value="0" tooltip="hide"></span>
                                        </td-->
                                    </tr>
                                </tbody>
                            </table>
                            <div class="form-group">
                                <button class="btn btn-success" ng-click="irDados();">
                                    Dados&nbsp;<i class="glyphicon glyphicon-arrow-left"></i>
                                </button>
                                <button class="btn btn-primary" ng-click="irTempo();">
                                    Tempo&nbsp;<i class="glyphicon glyphicon-arrow-right"></i>
                                </button>
                            </div>
                        </uib-tab>
                        <uib-tab index="2" heading="Tempo" disable="formulario.$invalid" select="tabTempoSelecionada()">
                            <h4>{{planejamento.nome}} - {{planejamento.cargaHorariaTotal}}h - {{quantidadeSemanas}} Semanas</h4>
                            <p>Começando hoje a previsão de terminar será em {{dataTerminoEstudo | date: 'dd/MM/yyyy'}}</p>
                            <p>Deixando {{semanasLivres}} semanas até a prova.</p>
                            <hr/>
                            <p>Selecione abaixo quantas horas (h) e quantos minutos (') por matéria você prevê que conseguirá estudar em cada dia da semana.</p>
                            <hr/>
                            <div class="row">
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-warning form-inline">
                                        <div class="panel-heading">
                                            Domingo
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('domingo')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="domingo in planejamento.horarios.domingo">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="domingo.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="domingo.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="domingo.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('domingo', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-default form-inline">
                                        <div class="panel-heading">
                                            Segunda
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('segunda')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="segunda in planejamento.horarios.segunda">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="segunda.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="segunda.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="segunda.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('segunda', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-default form-inline">
                                        <div class="panel-heading">
                                            Terça
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('terca')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="terca in planejamento.horarios.terca">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="terca.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="terca.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="terca.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('terca', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-default form-inline">
                                        <div class="panel-heading">
                                            Quarta
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('quarta')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="quarta in planejamento.horarios.quarta">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="quarta.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="quarta.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="quarta.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('quarta', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-default form-inline">
                                        <div class="panel-heading">
                                            Quinta
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('quinta')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="quinta in planejamento.horarios.quinta">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="quinta.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="quinta.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="quinta.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('quinta', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-default form-inline">
                                        <div class="panel-heading">
                                            Sexta
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('sexta')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="sexta in planejamento.horarios.sexta">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="sexta.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="sexta.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="sexta.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('sexta', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-success form-inline">
                                        <div class="panel-heading">
                                            Sabado
                                            <button class="btn btn-primary btn-xs pull-right" ng-click="adicionarMateria('sabado')"><i class="glyphicon glyphicon-plus"></i> Matéria</button>
                                        </div>
                                        <div class="list-group">
                                            <div class="list-group-item" ng-repeat="sabado in planejamento.horarios.sabado">
                                                <div class="col-lg-6 col-xs-12">
                                                    <select class="form-control materia-select" ng-model="sabado.materia" ng-options="materia.id as materia.assunto for materia in planejamento.materias"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="sabado.hora" ng-options="hora.value as hora.label for hora in horas" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4">
                                                    <select class="form-control" ng-model="sabado.minuto" ng-options="minuto.value as minuto.label for minuto in minutos" ng-change="calculaHorasSemana()"></select>
                                                </div>
                                                <div class="col-lg-2 col-xs-4 text-right">
                                                    <button class="btn btn-danger" ng-click="removerMateria('sabado', $index)"><i class="glyphicon glyphicon-minus"></i></button>
                                                </div>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-xs-12">
                                    <div class="panel panel-info text-center">
                                        <div class="panel-heading"><i class="glyphicon glyphicon-time"></i>&nbsp;Horas</div>
                                        <div class="panel-body">
                                            <b>Na semana: </b>{{calculoSemana}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-success" ng-click="irMaterias();">
                                Matérias&nbsp;<i class="glyphicon glyphicon-arrow-left"></i>
                            </button>
                            <button class="btn btn-primary" ng-click="verPlanejamento();">
                                Terminar&nbsp;<i class="glyphicon glyphicon-check"></i>
                            </button>
                        </uib-tab>
                    </uib-tabset>
                </form>
            </div>
        </div>
    </div>
</div>